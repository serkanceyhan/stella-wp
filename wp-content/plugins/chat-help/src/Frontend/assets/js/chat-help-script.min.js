let wHelp=document.querySelectorAll(".wHelp"),wHelpMulti=document.querySelectorAll(".wHelp-multi"),wHelpButton=document.querySelector(".wHelp_button"),wHelpBubble=document.querySelectorAll(".wHelp-bubble"),wHelpCurrentTime=document.querySelector(".current-time"),wHelpUserAvailability=document.querySelectorAll(".wHelpUserAvailability"),wHelpMultiPopupContent=document.querySelector(".wHelp-multi__popup__content"),wHelpCheckboxDiv=document.querySelectorAll(".wHelp--checkbox"),wHelpCheckbox=document.querySelectorAll(".wHelp__checkbox"),wHelpCheckButton=document.querySelectorAll(".wHelp__send-message"),wHelpPopupContent=document.querySelectorAll(".wHelp__popup__content"),wHelpButtons=document.querySelectorAll(".wHelpButtons"),wHelpChatAvailability=document.querySelector(".chat-availability"),analytics_parameter=whatshelp_frontend_script.analytics_parameter.google_analytics_parameter,event_name=whatshelp_frontend_script.analytics_parameter.event_name,{autoShowPopup,autoOpenPopupTimeout}=(document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".chat_help_analytics").forEach(e=>{e.addEventListener("click",function(){let t=this.getAttribute("data-number")||"",a=this.getAttribute("data-group")||"";var e=JSON.parse(JSON.stringify(analytics_parameter));e.forEach(e=>{"number"===e.event_parameter?e.event_parameter_value=t:"group"===e.event_parameter&&(e.event_parameter_value=a)});let l={};e.forEach(e=>{l[e.event_parameter]=e.event_parameter_value}),"undefined"!=typeof gtag&&gtag("event",event_name,l)})})}),whatshelp_frontend_script);if(wHelpCurrentTime){let e=new Date;wHelpCurrentTime.innerText=`${e.getHours()}:${e.getMinutes()}:`+e.getSeconds()}let toggleChatBtn=()=>{[...wHelp,...wHelpMulti].forEach(e=>e.classList.toggle("wHelp-show"))};if(wHelpBubble.forEach(e=>{wHelpButton||e.addEventListener("click",toggleChatBtn)}),0<alternativeWHelpBubble.length){let e=document.querySelectorAll(alternativeWHelpBubble);e.forEach(e=>{wHelpButton||e.addEventListener("click",toggleChatBtn)})}let initCheckboxState=()=>{"true"===localStorage.getItem("wHelpCheckboxValue")&&(wHelpCheckButton.forEach(e=>e.classList.remove("condition__checked")),wHelpCheckboxDiv.forEach(e=>e.style.display="none"))};function isAvailable(e,t){let a=!1,l=!1;for(var i in e){var r;e.hasOwnProperty(i)&&get_day_of_week(i)==t.day()&&(i=e[i].split("-"),r=moment.tz(i[0],"HH:mm",t.tz()),i=moment.tz(i[1],"HH:mm",t.tz()),r.year(t.year()).month(t.month()).date(t.date()),i.year(t.year()).month(t.month()).date(t.date()),t.isBetween(r,i)?a=!0:t.isBefore(r)&&(l=!0))}return{isAvailable:a,almost_available:l}}function get_day_of_week(e){return"sunday"==(e=e.toLowerCase())?0:"monday"==e?1:"tuesday"==e?2:"wednesday"==e?3:"thursday"==e?4:"friday"==e?5:"saturday"==e?6:void 0}wHelpCheckbox.forEach(e=>{e.addEventListener("change",function(){this.checked&&(localStorage.setItem("wHelpCheckboxValue",!0),initCheckboxState())})}),initCheckboxState();let handleUserAvailability=()=>{var e="true"===wHelpMultiPopupContent?.getAttribute("data-search"),t=document.querySelector(".wHelp-multi")?.classList.contains("wHelp-grid");wHelpUserAvailability.length&&(e&&wHelpMultiPopupContent.classList.add("wHelp-search"),wHelpUserAvailability.length>(t?4:3)&&wHelpMultiPopupContent.classList.add("wHelp-scroll"),wHelpUserAvailability.forEach(e=>{var t=JSON.parse(e.getAttribute("data-userAvailability")),a=e.getAttribute("data-timezone");isAvailable(t,a?moment().tz(a):moment()).isAvailable||null==t?(e.classList.add("avatar-active"),e.classList.remove("avatar-inactive")):(e.classList.add("avatar-inactive"),e.classList.remove("avatar-active"),e.setAttribute("disabled",!0))}))};function searchUser(){let a=document.getElementById("search-input").value.toUpperCase();var e=document.getElementById("multi-user").getElementsByClassName("user");Array.from(e).forEach(e=>{var t=e.querySelector(".user__info--name").textContent.toUpperCase();e.style.display=t.includes(a)?"":"none"})}handleUserAvailability();let updateButtonAvailability=()=>{wHelpButtons.forEach(e=>{var t=JSON.parse(e.getAttribute("data-btnavailablety")),a=e.getAttribute("data-timezone");isAvailable(t,a?moment().tz(a):moment()).isAvailable?(e.classList.add("avatar-active"),e.classList.add("chat_help_analytics"),e.classList.remove("avatar-inactive")):(e.classList.add("avatar-inactive"),e.classList.remove("avatar-active"),e.classList.remove("chat_help_analytics"))})};if(updateButtonAvailability(),wHelpChatAvailability){let e=JSON.parse(wHelpChatAvailability.getAttribute("data-availability")),t=wHelpChatAvailability.getAttribute("data-timezone"),a=t?moment().tz(t):moment(),l=isAvailable(e,a);l.isAvailable?(wHelpChatAvailability.classList.add("avatar-active"),wHelpChatAvailability.classList.add("chat_help_analytics"),wHelpChatAvailability.classList.remove("avatar-inactive"),wHelpCheckButton.forEach(e=>{e.classList.add("chat_help_analytics"),wHelpChatAvailability.classList.remove("chat_help_analytics")})):(wHelpCheckButton.forEach(e=>{e.classList.remove("chat_help_analytics"),wHelpChatAvailability.classList.add("chat_help_analytics")}),wHelpChatAvailability.classList.add("avatar-inactive"),wHelpChatAvailability.classList.remove("avatar-active"),wHelpChatAvailability.classList.remove("chat_help_analytics"))}(u=>{u("#form").length&&u("#form").validate(),wHelpPopupContent.forEach(s=>{let c=s.querySelector(".wHelp__send-message");u(s).submit(function(e){e.preventDefault();let o=u(this);if(o.valid()){var e={device:/Mobi|Android/i.test(navigator.userAgent)?"Mobile":"Desktop",browser:-1<(e=navigator.userAgent).indexOf("Firefox")?"Firefox":-1<e.indexOf("SamsungBrowser")?"Samsung Internet":-1<e.indexOf("Opera")||-1<e.indexOf("OPR")?"Opera":-1<e.indexOf("Edg")?"Edge":-1<e.indexOf("Chrome")?"Chrome":-1<e.indexOf("Safari")?"Safari":"Unknown",platform:navigator.platform,screen:screen.width+"x"+screen.height,language:navigator.language,vendor:navigator.vendor,url:window.location.href,referrer:document.referrer},t=localStorage.getItem("chat_help_user_information"),t=t?JSON.parse(t):{};let n={...e,...t};wHelpCheckButton.forEach(e=>{if(!e.classList.contains("condition__checked")){e=JSON.parse(wHelpChatAvailability?.getAttribute("data-availability"));if(e)if(isAvailable(e,moment()).isAvailable){var e=u(this).serialize(),l=window.location.href,i=document.title;let t=s.getAttribute("data-button"),a=s.getAttribute("data-loading");var r=s.getAttribute("data-product_attr");u.post(frontend_scripts.ajaxurl,{action:"handle_form_submission",data:e,userInfo:n,product_id:r,nonce:frontend_scripts.nonce,current_url:l,current_title:i},e=>{e.success?(c.innerHTML=a,setTimeout(function(){window.open(e.data.whatsAppURL,frontend_scripts.open_in_new_tab),o[0].reset(),c.innerHTML=t},100)):alert("Error processing request.")}).fail(()=>alert("Unexpected error occurred."))}}})}})})})(jQuery);let autoShowPopupFunc=()=>{autoShowPopup&&toggleChatBtn()};async function userInformation(){try{var e=await(await fetch("https://ipwhois.app/json/")).json();localStorage.setItem("chat_help_user_information",JSON.stringify(e))}catch(e){console.error(e.message)}}0<autoOpenPopupTimeout?setTimeout(autoShowPopupFunc,1e3*autoOpenPopupTimeout):autoShowPopupFunc(),document.addEventListener("DOMContentLoaded",function(){var e,t=new URLSearchParams(window.location.search).get("tab");t&&(document.querySelectorAll("#tab-menu a").forEach(e=>{e.classList.remove("active")}),e=document.querySelector(`[data-id="${t}-tab"]`))&&(e.classList.add("active"),e=document.querySelector("#"+t))&&e.scrollIntoView({behavior:"smooth"})}),userInformation();